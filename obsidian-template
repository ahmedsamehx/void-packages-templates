# srcpkgs/obsidian-bin/template
pkgname=obsidian-bin
version=1.8.10
revision=1
only_for_archs="x86_64"
short_desc="Obsidian — knowledge base that works on local Markdown files"
maintainer="Ahmed <ahmed-devel@proton.me>"
license="Proprietary"
homepage="https://obsidian.md"
distfiles="https://github.com/obsidianmd/obsidian-releases/releases/download/v${version}/Obsidian-${version}.AppImage"
checksum=05d4bfb76ef409ace4f4e59ccafb49dbd5a537c1ec15e570b59db603ddaad715
nostrip=yes

do_extract() {
    return 0
}

do_install() {
    install -d "${DESTDIR}/opt/obsidian"
    install -m 0755 "${XBPS_SRCDISTDIR}/${pkgname}-${version}/Obsidian-${version}.AppImage" \
        "${DESTDIR}/opt/obsidian/obsidian.AppImage"

    # wrapper بسيط
    install -d "${DESTDIR}/usr/bin"
    cat > "${DESTDIR}/usr/bin/obsidian" <<'EOF'
#!/bin/sh
exec /opt/obsidian/obsidian.AppImage "$@"
EOF
    chmod 0755 "${DESTDIR}/usr/bin/obsidian"
}

